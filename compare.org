:PREAMBLE:
#+title: Epkgs: Overview
#+setupfile: .orgconfig
#+name: setup
#+begin_src emacs-lisp :results silent
  (require 'emir)
#+end_src
#+name: addheader
#+header: :var header="" :var rows=""
#+begin_src elisp :hlines yes :results none
  (epkg-add-org-header rows header)
#+end_src
[[https://emacsmirror.net/stats][up]]
:END:
* Summary
:PROPERTIES:
:ID:       023e4161-8c52-44e7-8f26-dfddbfc016f4
:END:
#+name: summary
#+begin_src emacs-lisp
  (require 'finder-inf)
  (let* ((builtin 498)
         ;; This is costly and noisy, and mostly constant.
         ;; (builtin (length (emir--builtin-packages-alist)))
         ;; This does not include "org", "tramp" and "transient".
         (builtin-emir (length (epkgs 'name [builtin])))
         (shelved      (length (epkgs 'name [shelved])))
         (table `(("" "Epkg" "Mirror" "Attic" "Emacs" "GNU Elpa" "NonGNU Elpa" "Melpa")
                  hline
                  (builtin     ,builtin-emir "" "" ,builtin  0 "" "")
                  (gnu-elpa     0  0 "" ""  0 "" "")
                  (nongnu-elpa  0  0 "" "" ""  0 "")
                  hline
                  (github       0  0 "" ""  0  0  0)
                  (gitlab       0  0 "" ""  0  0  0)
                  (codeberg     0  0 "" ""  0  0  0)
                  (sourcehut    0  0 "" ""  0  0  0)
                  (gnu          0  0 "" ""  0  0  0)
                  (nongnu       0  0 "" ""  0  0  0)
                  hline
                  (git          0  0 "" ""  0  0  0)
                  (hg           0  0 "" ""  0  0  0)
                  hline
                  (subtree      0  0 "" "" "" "" "")
                  (wiki         0  0 "" "" "" "" "")
                  (file         0  0 "" "" "" "" "")
                  hline
                  (orphaned     0  0 "" "" "" ""  0)
                  (shelved     ,shelved "" ,shelved "" "" ""  0)
                  (mirror      "" "" "" "" "" ""  0)
                  hline
                  (secondary   "" "" "" "" "" ""  0)
                  (unreleased  "" "" "" ""  0  0 "")
                  hline)))
    (dolist (class (epkgs 'class [mirrored*]))
      (when (eq class 'core)
        (setq class 'builtin))
      (if-let ((elt (assq class table)))
          (progn
            (cl-incf (nth 1 elt))
            (cl-incf (nth 2 elt)))
        (error "No entry for %s" class)))
    (pcase-dolist (`(,fetcher ,url ,name ,epkg-package ,released)
                   (epkg-sql [:select [class url name epkg-package released]
                              :from gnu-elpa-recipes]))
      (let ((type (pcase (list fetcher released)
                    (`(,_      nil) 'unreleased)
                    (`(core     ,_) 'builtin)
                    (`(internal ,_) 'gnu-elpa)
                    (_ fetcher))))
        (cl-incf (nth 5 (assq type table)))))
    (pcase-dolist (`(,fetcher ,url ,name ,epkg-package ,released)
                   (epkg-sql [:select [class url name epkg-package released]
                              :from nongnu-elpa-recipes]))
      (let ((type (pcase (list fetcher released)
                    (`(,_      nil) 'unreleased)
                    (`(internal ,_) 'nongnu-elpa)
                    (_ fetcher))))
        (cl-incf (nth 6 (assq type table)))))
    (pcase-dolist (`(,fetcher ,url ,name ,epkg-package)
                   (epkg-sql [:select [class url name epkg-package]
                              :from melpa-recipes]))
      (let ((type
             (pcase fetcher
               ((guard (and epkg-package (not (equal name epkg-package)))) 'secondary)
               ((and 'git (guard (string-prefix-p "https://git.savannah.gnu.org" url))) 'gnu)
               ((and 'git (guard (string-prefix-p "https://git.savannah.nongnu.org" url))) 'nongnu)
               ((and 'github (guard (string-prefix-p "https://github.com/emacsorphanage/" url))) 'orphaned)
               ((and 'github (guard (string-prefix-p "https://github.com/emacsattic/" url))) 'shelved)
               ((and 'github (guard (string-prefix-p "https://github.com/emacsmirror/" url))) 'mirror)
               (_ fetcher))))
        (cl-incf (nth 7 (assq type table)))))
    `(,@table
      ("total"
       ,@(seq-reduce (lambda (acc elt)
                       (cl-mapcar (lambda (a b)
                                    (+ (if (numberp a) a 0)
                                       (if (numberp b) b 0)))
                                  acc elt))
                     (--keep (and (listp it)
                                  (symbolp (car it))
                                  (cdr it))
                             table)
                     '(0 0 0 0 0 0 0)))))
#+end_src
#+results: summary
|             | Epkg | Mirror | Attic | Emacs | GNU Elpa | NonGNU Elpa | Melpa |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| builtin     |  495 |        |       |   498 |       18 |             |       |
| gnu-elpa    |  145 |    145 |       |       |      133 |             |       |
| nongnu-elpa |    0 |      0 |       |       |          |           0 |       |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| github      | 5309 |   5309 |       |       |      165 |         162 |  4758 |
| gitlab      |  183 |    183 |       |       |       18 |          13 |   164 |
| codeberg    |   93 |     93 |       |       |        1 |          30 |    80 |
| sourcehut   |   98 |     98 |       |       |       41 |           3 |    55 |
| gnu         |   10 |     10 |       |       |        9 |           0 |     2 |
| nongnu      |    8 |      8 |       |       |        3 |           0 |     2 |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| git         |  113 |    113 |       |       |       18 |           4 |    98 |
| hg          |   16 |     16 |       |       |        1 |           0 |    14 |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| subtree     |   25 |     25 |       |       |          |             |       |
| wiki        |  586 |    586 |       |       |          |             |       |
| file        |   54 |     54 |       |       |          |             |       |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| orphaned    |  142 |    142 |       |       |          |             |   108 |
| shelved     | 1521 |        |  1521 |       |          |             |    18 |
| mirror      |      |        |       |       |          |             |    12 |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| secondary   |      |        |       |       |          |             |   243 |
| unreleased  |      |        |       |       |        7 |           0 |       |
|-------------+------+--------+-------+-------+----------+-------------+-------|
| total       | 8798 |   6782 |  1521 |   498 |      414 |         212 |  5554 |

- Most built-in packages are not mirrored.  They are included in the
  Epkg database, but no individual repositories exist for them on the
  Emacsmirror.

- "Core" packages (i.e., those that are also distributed on GNU Elpa
  for use with older Emacs releases) used to be mirrored but no tool
  exists that is truely capable of doing that reliably and
  efficiently, so these repositories ended up never being updated and
  were removed.

- Three built-in packages (~org~, ~tramp~ and ~transient~) are mirrored, but
  in those cases the Emacsmirror tracks the upstream repositories, not
  the version in Emacs, which explains the apparent discrepancy in the
  ~builtin~ row.

- The Emacsmirror prefers mirroring packages from the upstream
  repository, even when they are also available from GNU Elpa.
  That explaining the apparent discrepancy in the ~gnu-elpa~ row.

- Melpa gets some packages from the Emacsmirror (~mirror~ row), because
  for one reason or another it is not able to get them directly from
  upstream.

- Melpa also gets some packages from the Emacsattic (~shelved~ row),
  likely because the upstream repository has disappeared.  Such
  packages are "shelved", that is, they are moved from the Emacsmirror
  to the Emacsattic.  Melpa doesn't support demoting packages like
  this, so here we tend to keep them around longer, treating the attic
  as the "upstream".

- When a repository is used to maintain a "main" package as well
  as one or more "extentions" to that package, then Melpa often
  distributes these packages individually, while the Emacsmirror
  does not split up such repositories into multiple packages.
  Such "secondary packages" are accounted for in the ~secondary~
  row and listed in the "Shared repository" table below.

* Emacs
:PROPERTIES:
:ID:       d33670d0-33bd-4db5-93d7-57357ac25678
:END:
** Prefer elpa
:PROPERTIES:
:ID:       0d5482d5-f620-4ae4-92ab-dcc4cb096e08
:END:
#+name: builtin-prefer-elpa
#+begin_src emacs-lisp :post addheader('("Package" "Class"),*this*)
  (epkg-sql [:select :distinct [packages:name packages:class]
             :from [packages builtin-libraries]
             :where (= packages:name builtin-libraries:package)
             :and packages:class :in $v1
             :order-by [(asc packages:name)]]
            [gnu-elpa core])
#+end_src
#+results: builtin-prefer-elpa

** Prefer upstream
:PROPERTIES:
:ID:       43da9d6f-fffb-420f-af20-96f069324cce
:END:
#+name: builtin-prefer-upstream
#+begin_src emacs-lisp :post addheader('("Package" "Class"),*this*)
  (epkg-sql [:select :distinct [packages:name packages:class]
             :from [packages builtin-libraries]
             :where (and (= packages:name builtin-libraries:package)
                         (not (in packages:class $v1)))
             :order-by [(asc packages:name)]]
            [builtin gnu-elpa core])
#+end_src
#+results: builtin-prefer-upstream
| Package (3) | Class  |
|-------------+--------|
| org         | gnu    |
| tramp       | gnu    |
| transient   | github |

* GNU Elpa
:PROPERTIES:
:ID:       6aff2bdd-72bd-4902-80ce-56a8d1c911f2
:END:
** New
:PROPERTIES:
:ID:       de3995d6-9c4e-4014-8233-fd4e0e0c4440
:END:
#+name: gnu-elpa-new
#+begin_src emacs-lisp :post addheader('("Package" "Class" "Url"),*this*)
  (mapcan (pcase-lambda (`(,name ,class ,url))
            (and (not (emir--config name :delayed))
                 (not (emir--config name :secondary))
                 (not (emir--config name :builtin-preferred))
                 (list (list name class (if (eq class 'core) "" url)))))
          (epkg-sql [:select [name class url]
                     :from gnu-elpa-recipes
                     :where (isnull epkg-package)
                     :order-by [(asc name)]]))
#+end_src
#+results: gnu-elpa-new

** Delayed
:PROPERTIES:
:ID:       d846eae7-e7a9-4b3b-be50-655f9736d770
:END:
#+name: gnu-elpa-delayed
#+begin_src emacs-lisp :post addheader('("Package" "Elpa" "Reason"),*this*)
  (seq-keep (pcase-lambda (`(,name ,class))
              (and-let* ((reason (emir--config name :delayed)))
                (list name class reason)))
            (epkg-sql [:select [name class]
                       :from gnu-elpa-recipes
                       :where (isnull epkg-package)
                       :order-by [(asc name)]]))
#+end_src
#+results: gnu-elpa-delayed

** Unreleased
:PROPERTIES:
:ID:       abd15ba1-082f-411d-a557-7f5ff0e0200a
:END:
#+name: gnu-elpa-unreleased
#+begin_src emacs-lisp :post addheader('("Package" "Elpa"),*this*)
  (epkg-sql [:select [name class]
             :from gnu-elpa-recipes
             :where (and (in class $v1)
                         (isnull released))
             :order-by [(asc name)]]
            [subtree external])
#+end_src
#+results: gnu-elpa-unreleased

** Shelved
:PROPERTIES:
:ID:       b17f6889-621c-45ec-bbbd-f433ba1ab06c
:END:
#+name: gnu-elpa-shelved
#+begin_src emacs-lisp :post addheader('("Package" "Elpa"),*this*)
  (epkg-sql [:select :distinct [packages:name gnu-elpa-recipes:class]
             :from [packages gnu-elpa-recipes]
             :where (= packages:name gnu-elpa-recipes:name)
             :and (= packages:class 'shelved)
             :order-by [(asc packages:name)]])
#+end_src
#+results: gnu-elpa-shelved

** Prefer builtin
:PROPERTIES:
:ID:       7a20ccb7-7e22-4110-aaae-02cdc725398f
:END:
#+name: gnu-elpa-prefer-builtin
#+begin_src emacs-lisp :post addheader('("Package" "Elpa" "Reason"),*this*)
  (mapcar (pcase-lambda (`(,name ,class))
            (list name class
                  (or (emir--config name :builtin-preferred) "")))
          (epkg-sql [:select :distinct [packages:name gnu-elpa-recipes:class]
                     :from [packages gnu-elpa-recipes]
                     :where (= packages:name gnu-elpa-recipes:name)
                     :and (= packages:class 'builtin)
                     :order-by [(asc packages:name)]]))
#+end_src
#+results: gnu-elpa-prefer-builtin
| Package (23)        | Elpa     | Reason              |
|---------------------+----------+---------------------|
| bind-key            | core     |                     |
| cl-generic          | internal | backport of builtin |
| cl-lib              | internal | backport of builtin |
| csharp-mode         | github   |                     |
| eglot               | core     |                     |
| eldoc               | core     |                     |
| erc                 | core     |                     |
| external-completion | core     |                     |
| flymake             | core     |                     |
| jsonrpc             | core     |                     |
| let-alist           | core     |                     |
| map                 | core     |                     |
| nadvice             | internal | backport of builtin |
| ntlm                | core     |                     |
| project             | core     |                     |
| python              | core     |                     |
| seq                 | internal | backport of builtin |
| so-long             | core     |                     |
| soap-client         | core     |                     |
| svg                 | core     |                     |
| use-package         | core     |                     |
| verilog-mode        | core     |                     |
| xref                | core     |                     |

** Prefer Elpa despite :url
:PROPERTIES:
:ID:       14eaeffa-20a4-4e4e-a3ec-cb0711b0c08d
:END:
#+name: gnu-elpa-prefer-elpa
#+begin_src emacs-lisp :post addheader('("Package" ":url"),*this*)
  (let ((alist (emir-gelpa--recipes-alist emir-gnu-elpa-repository)))
    (seq-keep (pcase-lambda (`(,name ,_class ,_elpa))
                (and-let* ((url (plist-get (cdr (assoc name alist)) :url)))
                  (list name url)))
              (epkg-sql [:select :distinct [packages:name
                                            packages:class
                                            gnu-elpa-recipes:class]
                         :from [packages gnu-elpa-recipes]
                         :where (= packages:name gnu-elpa-recipes:epkg-package)
                         :and packages:class :in $v1
                         :order-by [(asc gnu-elpa-recipes:url)
                                    (asc packages:name)]]
                        [gnu-elpa])))
#+end_src
#+results: gnu-elpa-prefer-elpa
| Package (19)        | :url                                              |
|---------------------+---------------------------------------------------|
| paced               | bzr::bzr://bzr.savannah.nongnu.org/paced-el/trunk |
| org-edna            | bzr::https://bzr.savannah.gnu.org/r/org-edna-el   |
| auto-overlays       | http://www.dr-qubit.org/git/predictive.git        |
| dict-tree           | http://www.dr-qubit.org/git/predictive.git        |
| heap                | http://www.dr-qubit.org/git/predictive.git        |
| queue               | http://www.dr-qubit.org/git/predictive.git        |
| tNFA                | http://www.dr-qubit.org/git/predictive.git        |
| trie                | http://www.dr-qubit.org/git/predictive.git        |
| buildbot            | https://g.ypei.me/buildbot.el.git                 |
| vcl-mode            | https://git.gnu.org.ua/vcl-mode.git               |
| setup               | https://git.sr.ht/~pkal/setup                     |
| phps-mode           | https://github.com/cjohansson/emacs-phps-mode     |
| clipboard-collector | https://github.com/clemera/clipboard-collector    |
| ebdb                | https://github.com/girzel/ebdb.git                |
| chess               | https://github.com/jwiegley/emacs-chess.git       |
| ioccur              | https://github.com/thierryvolpiatto/ioccur.git    |
| ediprolog           | https://github.com/triska/ediprolog               |
| persist             | https://gitlab.com/phillord/persist               |
| bluetooth           | https://gitlab.com/rstocker/emacs-bluetooth       |

* NonGNU Elpa
:PROPERTIES:
:ID:       85ff91e5-4565-433f-9e01-58cb9ff1bf03
:END:
** New
:PROPERTIES:
:ID:       0e3e300d-2683-4600-829a-024f4c1bd34e
:END:
#+name: nongnu-elpa-new
#+begin_src emacs-lisp :post addheader('("Package" "Class" "Url"),*this*)
  (mapcan (pcase-lambda (`(,name ,class ,url))
            (and (not (emir--config name :delayed))
                 (not (emir--config name :secondary))
                 (not (emir--config name :builtin-preferred))
                 (list (list name class (if (eq class 'core) "" url)))))
          (epkg-sql [:select [name class url]
                     :from nongnu-elpa-recipes
                     :where (isnull epkg-package)
                     :order-by [(asc name)]]))
#+end_src
#+results: nongnu-elpa-new

** Delayed
:PROPERTIES:
:ID:       bb885ac5-e755-4cac-9766-3a40b9075926
:END:
#+name: nongnu-elpa-delayed
#+begin_src emacs-lisp :post addheader('("Package" "Elpa" "Reason"),*this*)
  (seq-keep (pcase-lambda (`(,name ,class))
              (and-let* ((reason (emir--config name :delayed)))
                (list name class reason)))
            (epkg-sql [:select [name class]
                       :from nongnu-elpa-recipes
                       :where (isnull epkg-package)
                       :order-by [(asc name)]]))
#+end_src
#+results: nongnu-elpa-delayed

** Unreleased
:PROPERTIES:
:ID:       20acb40f-27db-4c8f-8a10-cf5a7c84bae7
:END:
#+name: nongnu-elpa-unreleased
#+begin_src emacs-lisp :post addheader('("Package" "Elpa"),*this*)
  (epkg-sql [:select [name class]
             :from nongnu-elpa-recipes
             :where (and (in class $v1)
                         (isnull released))
             :order-by [(asc name)]]
            [subtree external])
#+end_src
#+results: nongnu-elpa-unreleased

** Shelved
:PROPERTIES:
:ID:       1e805a02-8c5b-4d8d-92c0-94c38135582c
:END:
#+name: nongnu-elpa-shelved
#+begin_src emacs-lisp :post addheader('("Package" "Elpa"),*this*)
  (epkg-sql [:select :distinct [packages:name nongnu-elpa-recipes:class]
             :from [packages nongnu-elpa-recipes]
             :where (= packages:name nongnu-elpa-recipes:name)
             :and (= packages:class 'shelved)
             :order-by [(asc packages:name)]])
#+end_src
#+results: nongnu-elpa-shelved
| Package (1)  | Elpa   |
|--------------+--------|
| xah-fly-keys | github |

* Melpa
:PROPERTIES:
:ID:       eff92541-4709-4bcf-bff1-2be1120ccfbd
:END:
** New
:PROPERTIES:
:ID:       80bbc73b-c1ad-4dc1-b86c-39e8f7b3bb70
:END:
#+name: melpa-new
#+begin_src emacs-lisp :post addheader('("Package" "Class" "Melpa" "Link"),*this*)
  (seq-keep (pcase-lambda (`(,name ,fetcher ,url))
              (and (not (or (emir--lookup-url url)
                            (emir--config name :delayed)
                            (emir--config name :secondary)))
                   (list name
                         (and-let* ((class (emir--url-to-class url)))
                           (closql--abbrev-class class))
                         fetcher
                         (melpa-org-link name))))
            (epkg-sql [:select [name class url]
                       :from melpa-recipes
                       :where (isnull epkg-package)
                       :order-by [(asc name)]]))
#+end_src
#+results: melpa-new

** Delayed
:PROPERTIES:
:ID:       5f94df6a-24e1-4e74-a16a-0649c669a526
:END:
#+name: melpa-delayed
#+begin_src emacs-lisp :post addheader('("Package" "Melpa" "Reason"),*this*)
  (seq-keep (pcase-lambda (`(,name ,class))
              (and-let* ((reason (emir--config name :delayed)))
                (list name class reason)))
            (epkg-sql [:select [name class]
                       :from melpa-recipes
                       :where (isnull epkg-package)
                       :order-by [(asc name)]]))
#+end_src
#+results: melpa-delayed
| Package (3)     | Melpa  | Reason                                               |
|-----------------+--------+------------------------------------------------------|
| connection      | github | Don't add; part of upstream dictionary but not Emacs |
| django-snippets | github | Don't add; part of shelved django-mode               |
| link            | github | Don't add; part of upstream dictionary but not Emacs |

** Shelved
:PROPERTIES:
:ID:       ad356942-4584-4cef-8292-1cdba76e5845
:END:
#+name: melpa-shelved
#+begin_src emacs-lisp :post addheader('("Package" "Url"),*this*)
  (epkg-sql [:select [packages:name packages:url]
             :from [packages melpa-recipes]
             :where (and (= melpa-recipes:epkg-package packages:name)
                         (in packages:class $v1))
             :order-by [(asc packages:name)]]
            [shelved])
#+end_src
#+results: melpa-shelved
| Package (42)                | Url                                                                         |
|-----------------------------+-----------------------------------------------------------------------------|
| angular-mode                | https://github.com/rudolfolah/angularjs-mode                                |
| bury-successful-compilation | https://github.com/EricCrosson/bury-successful-compilation.git              |
| cfml-mode                   | https://github.com/amyers634/cfml-mode                                      |
| color-theme                 | https://github.com/emacsorphanage/color-theme                               |
| company-go                  | https://github.com/nsf/gocode                                               |
| company-racer               | https://github.com/emacsorphanage/company-racer                             |
| django-mode                 | https://github.com/unrelentingtech/django-mode                              |
| drawille                    | https://github.com/josuah/drawille-el                                       |
| e2wm-R                      | https://github.com/myuhe/e2wm-R.el                                          |
| edit-at-point               | https://github.com/enoson/edit-at-point.el                                  |
| elein                       | https://github.com/remvee/elein                                             |
| eno                         | https://github.com/enoson/eno.el                                            |
| flow-js2-mode               | https://github.com/Fuco1/flow-js2-mode                                      |
| flycheck-gometalinter       | https://github.com/favadi/flycheck-gometalinter.git                         |
| flycheck-julia              | https://github.com/gdkrmr/flycheck-julia                                    |
| fold-dwim                   | https://community.dur.ac.uk/p.j.heslin/Software/Emacs/Download/fold-dwim.el |
| fold-dwim-org               | https://github.com/mattfidler/fold-dwim-org                                 |
| go-autocomplete             | https://github.com/nsf/gocode                                               |
| helm-ctest                  | https://github.com/danlamanna/helm-ctest                                    |
| ido-migemo                  | https://github.com/myuhe/ido-migemo.el                                      |
| inlineR                     | https://github.com/myuhe/inlineR.el                                         |
| journalctl-mode             | https://github.com/SebastianMeisel/journalctl-mode                          |
| lsp-python-ms               | https://github.com/emacs-lsp/lsp-python-ms                                  |
| magit-gh-pulls              | https://github.com/sigma/magit-gh-pulls                                     |
| mic-paren                   | http://www.gnuvola.org/software/j/mic-paren/mic-paren.el                    |
| nndiscourse                 | https://github.com/dickmao/nndiscourse                                      |
| nnhackernews                | https://github.com/dickmao/nnhackernews                                     |
| nnreddit                    | https://github.com/dickmao/nnreddit                                         |
| nntwitter                   | https://github.com/dickmao/nntwitter                                        |
| org-doing                   | https://github.com/rudolfolah/org-doing                                     |
| org-multiple-keymap         | https://github.com/myuhe/org-multiple-keymap.el                             |
| org-pivotal                 | https://github.com/org-pivotal/org-pivotal                                  |
| org-wunderlist              | https://github.com/myuhe/org-wunderlist.el                                  |
| paradox                     | https://github.com/Malabarba/paradox.git                                    |
| peep-dired                  | https://github.com/asok/peep-dired                                          |
| quick-preview               | https://github.com/myuhe/quick-preview.el                                   |
| redprl                      | https://github.com/RedPRL/sml-redprl                                        |
| redshank                    | http://www.foldr.org/~michaelw/projects/redshank.git                        |
| twtxt                       | https://github.com/deadblackclover/twtxt-el                                 |
| unkillable-scratch          | https://github.com/EricCrosson/unkillable-scratch.git                       |
| weechat                     | https://github.com/the-kenny/weechat.el                                     |
| weechat-alert               | https://github.com/Kungi/weechat-alert                                      |

** Shared repositories
:PROPERTIES:
:ID:       cb112869-6eb7-4a10-9d20-6868d2885461
:END:
#+name: secondary-packages
#+begin_src emacs-lisp :post addheader('("Primary package" "Secondary package" "Class"),*this*)
  (epkg-sql [:select :distinct [packages:name
                                melpa-recipes:name
                                packages:class]
             :from [packages melpa-recipes]
             :where (and (= packages:name melpa-recipes:epkg-package)
                         (not (= melpa-recipes:epkg-package
                                 melpa-recipes:name)))
             :order-by [(asc packages:name)
                        (asc melpa-recipes:name)]])
#+end_src
#+results: secondary-packages
| Primary package (138)   | Secondary package               | Class     |
|-------------------------+---------------------------------+-----------|
| 750words                | ox-750words                     | github    |
| ac-php                  | ac-php-core                     | github    |
| ac-php                  | company-php                     | github    |
| ameba                   | flycheck-ameba                  | github    |
| axiom-environment       | company-axiom                   | git       |
| axiom-environment       | ob-axiom                        | git       |
| biblio                  | biblio-core                     | github    |
| bibtex-completion       | helm-bibtex                     | github    |
| bibtex-completion       | ivy-bibtex                      | github    |
| bufler                  | helm-bufler                     | github    |
| button-lock             | wiki-nav                        | github    |
| calfw                   | calfw-cal                       | github    |
| calfw                   | calfw-howm                      | github    |
| calfw                   | calfw-ical                      | github    |
| calfw                   | calfw-org                       | github    |
| cardano-tx              | bech32                          | github    |
| cardano-tx              | cardano-wallet                  | github    |
| cardano-tx              | cbor                            | github    |
| cardano-tx              | ouroboros                       | github    |
| cardano-tx              | readable-numbers                | github    |
| cfn-mode                | flycheck-cfn                    | gitlab    |
| chatgpt-shell           | dall-e-shell                    | github    |
| chatgpt-shell           | ob-chatgpt-shell                | github    |
| chatgpt-shell           | ob-dall-e-shell                 | github    |
| chronometrist           | chronometrist-key-values        | codeberg  |
| chronometrist           | chronometrist-spark             | codeberg  |
| circe                   | tracking                        | github    |
| citar                   | citar-embark                    | github    |
| clojure-essential-ref   | clojure-essential-ref-nov       | github    |
| clojure-mode            | clojure-mode-extra-font-locking | github    |
| codesearch              | projectile-codesearch           | github    |
| colorless-themes        | lavenderless-theme              | sourcehut |
| colorless-themes        | nordless-theme                  | sourcehut |
| compile-multi           | compile-multi-all-the-icons     | github    |
| compile-multi           | consult-compile-multi           | github    |
| copyit                  | copyit-pandoc                   | github    |
| crystal-mode            | flycheck-crystal                | github    |
| ctl-mode                | gs-mode                         | github    |
| dash                    | dash-functional                 | github    |
| datetime-format         | timecop                         | github    |
| ddskk                   | ccc                             | github    |
| ddskk                   | cdb                             | github    |
| deferred                | concurrent                      | github    |
| dired-hacks             | dired-avfs                      | github    |
| dired-hacks             | dired-collapse                  | github    |
| dired-hacks             | dired-filter                    | github    |
| dired-hacks             | dired-hacks-utils               | github    |
| dired-hacks             | dired-list                      | github    |
| dired-hacks             | dired-narrow                    | github    |
| dired-hacks             | dired-open                      | github    |
| dired-hacks             | dired-rainbow                   | github    |
| dired-hacks             | dired-ranger                    | github    |
| dired-hacks             | dired-subtree                   | github    |
| dired-rsync             | dired-rsync-transient           | github    |
| distel-completion-lib   | company-distel                  | github    |
| dix                     | dix-evil                        | github    |
| dogears                 | helm-dogears                    | github    |
| dylan                   | dime                            | github    |
| eclim                   | ac-emacs-eclim                  | github    |
| eclim                   | company-emacs-eclim             | github    |
| el-secretario           | el-secretario-elfeed            | sourcehut |
| el-secretario           | el-secretario-mu4e              | sourcehut |
| el-secretario           | el-secretario-notmuch           | sourcehut |
| el-secretario           | el-secretario-org               | sourcehut |
| elfeed                  | elfeed-web                      | github    |
| elfeed-tube             | elfeed-tube-mpv                 | github    |
| emacsql                 | emacsql-mysql                   | github    |
| emacsql                 | emacsql-pg                      | github    |
| emacsql                 | emacsql-psql                    | github    |
| emacsql                 | emacsql-sqlite                  | github    |
| emacsql                 | emacsql-sqlite-builtin          | github    |
| emacsql                 | emacsql-sqlite-module           | github    |
| embark                  | avy-embark-collect              | github    |
| embark                  | embark-consult                  | github    |
| espotify                | consult-spotify                 | codeberg  |
| espotify                | ivy-spotify                     | codeberg  |
| esqlite                 | esqlite-helm                    | github    |
| evil                    | evil-test-helpers               | github    |
| ewal                    | ewal-doom-themes                | github    |
| ewal                    | ewal-evil-cursors               | github    |
| ewal                    | ewal-spacemacs-themes           | github    |
| flutter                 | flutter-l10n-flycheck           | github    |
| flx                     | flx-ido                         | github    |
| flycheck-aspell         | flymake-aspell                  | github    |
| flyspell-correct        | flyspell-correct-avy-menu       | github    |
| flyspell-correct        | flyspell-correct-helm           | github    |
| flyspell-correct        | flyspell-correct-ivy            | github    |
| flyspell-correct        | flyspell-correct-popup          | github    |
| friendly-shell          | friendly-remote-shell           | github    |
| friendly-shell          | friendly-shell-command          | github    |
| frimacs                 | ob-fricas                       | github    |
| fsharp-mode             | eglot-fsharp                    | github    |
| fuz                     | helm-fuz                        | github    |
| git-emacs               | git-blamed                      | github    |
| gitlab                  | helm-gitlab                     | github    |
| gitlab                  | ivy-gitlab                      | github    |
| go-mode                 | go-guru                         | github    |
| go-mode                 | go-rename                       | github    |
| groovy-mode             | grails-mode                     | github    |
| haskell-emacs           | haskell-emacs-base              | github    |
| haskell-emacs           | haskell-emacs-text              | github    |
| helm                    | helm-core                       | github    |
| historian               | ivy-historian                   | github    |
| hydra                   | lv                              | github    |
| indent-lint             | flycheck-indent                 | github    |
| islisp-mode             | inferior-islisp                 | gitlab    |
| ivy                     | counsel                         | github    |
| ivy                     | ivy-avy                         | github    |
| ivy                     | ivy-hydra                       | github    |
| ivy                     | swiper                          | github    |
| jade-mode               | stylus-mode                     | github    |
| jade-mode               | sws-mode                        | github    |
| jedi                    | jedi-core                       | github    |
| jump                    | inflections                     | github    |
| kaesar                  | kaesar-file                     | github    |
| kaesar                  | kaesar-mode                     | github    |
| kaesar                  | kaesar-pbkdf2                   | github    |
| kaleidoscope            | kaleidoscope-evil-state-flash   | git       |
| keg                     | flycheck-keg                    | github    |
| keg                     | keg-mode                        | github    |
| kubel                   | kubel-evil                      | github    |
| kubernetes              | kubernetes-evil                 | github    |
| langtool                | langtool-popup                  | github    |
| lean-mode               | company-lean                    | github    |
| lean-mode               | helm-lean                       | github    |
| load-theme-buffer-local | color-theme-buffer-local        | github    |
| loopy                   | loopy-dash                      | github    |
| lurk-mode               | ob-lurk                         | github    |
| mac-pseudo-daemon       | osx-pseudo-daemon               | github    |
| magit                   | git-commit                      | github    |
| magit                   | magit-section                   | github    |
| major-mode-hydra        | pretty-hydra                    | github    |
| maxima                  | company-maxima                  | gitlab    |
| merlin                  | merlin-ac                       | subtree   |
| merlin                  | merlin-company                  | subtree   |
| merlin                  | merlin-iedit                    | subtree   |
| metal-archives          | metal-archives-shopping-list    | github    |
| monorepo-cadadr         | bibliothek                      | github    |
| monorepo-cadadr         | forecast                        | github    |
| monorepo-cadadr         | org-variable-pitch              | github    |
| monorepo-cadadr         | paper-theme                     | github    |
| monorepo-zenitani       | smart-compile                   | github    |
| nameframe               | nameframe-perspective           | github    |
| nameframe               | nameframe-project               | github    |
| nameframe               | nameframe-projectile            | github    |
| nand2tetris             | company-nand2tetris             | github    |
| nand2tetris             | nand2tetris-assembler           | github    |
| native-complete         | company-native-complete         | github    |
| nixos-options           | company-nixos-options           | github    |
| nixos-options           | helm-nixos-options              | github    |
| nixos-options           | nix-sandbox                     | github    |
| opener                  | evil-opener                     | github    |
| org-multi-wiki          | helm-org-multi-wiki             | github    |
| org-pdftools            | org-noter-pdftools              | github    |
| org-project-capture     | org-category-capture            | github    |
| org-project-capture     | org-projectile-helm             | github    |
| org-ql                  | helm-org-ql                     | github    |
| org-recent-headings     | helm-org-recent-headings        | github    |
| org-starter             | org-starter-swiper              | github    |
| org2blog                | metaweblog                      | github    |
| ox-twiki                | ox-tiddly                       | github    |
| package-lint            | package-lint-flymake            | github    |
| pest-mode               | flycheck-pest                   | github    |
| pest-mode               | flymake-pest                    | github    |
| phpactor                | company-phpactor                | github    |
| phpstan                 | flycheck-phpstan                | github    |
| phpstan                 | flymake-phpstan                 | github    |
| pig-mode                | pig-snippets                    | github    |
| pollen-mode             | company-pollen                  | github    |
| prescient               | company-prescient               | github    |
| prescient               | corfu-prescient                 | github    |
| prescient               | ivy-prescient                   | github    |
| prescient               | selectrum-prescient             | github    |
| prescient               | vertico-prescient               | github    |
| processing-mode         | processing-snippets             | github    |
| projection              | projection-multi                | github    |
| prosjekt                | dirtree-prosjekt                | github    |
| prosjekt                | helm-prosjekt                   | github    |
| psalm                   | flycheck-psalm                  | github    |
| request                 | request-deferred                | github    |
| restclient              | restclient-helm                 | github    |
| restclient              | restclient-jq                   | github    |
| rinari                  | ruby-compilation                | github    |
| ripgrep                 | projectile-ripgrep              | github    |
| rtags                   | ac-rtags                        | github    |
| rtags                   | company-rtags                   | github    |
| rtags                   | flycheck-rtags                  | github    |
| rtags                   | helm-rtags                      | github    |
| rtags                   | ivy-rtags                       | github    |
| rtags                   | rtags-xref                      | github    |
| semaphore               | semaphore-promise               | github    |
| sift                    | projectile-sift                 | github    |
| smart-mode-line         | smart-mode-line-powerline-theme | github    |
| solidity-mode           | company-solidity                | github    |
| solidity-mode           | solidity-flycheck               | github    |
| sourcekit               | company-sourcekit               | github    |
| speechd                 | speechd-el                      | github    |
| springboard             | ido-springboard                 | github    |
| stan-mode               | company-stan                    | github    |
| stan-mode               | eldoc-stan                      | github    |
| stan-mode               | flycheck-stan                   | github    |
| stan-mode               | stan-snippets                   | github    |
| term-manager            | term-project                    | github    |
| term-manager            | term-projectile                 | github    |
| tern                    | tern-auto-complete              | github    |
| transient-extras        | transient-extras-a2ps           | github    |
| transient-extras        | transient-extras-lp             | github    |
| tree-edit               | evil-tree-edit                  | github    |
| tree-sitter             | tsc                             | github    |
| treemacs                | treemacs-all-the-icons          | github    |
| treemacs                | treemacs-evil                   | github    |
| treemacs                | treemacs-icons-dired            | github    |
| treemacs                | treemacs-magit                  | github    |
| treemacs                | treemacs-persp                  | github    |
| treemacs                | treemacs-perspective            | github    |
| treemacs                | treemacs-projectile             | github    |
| treemacs                | treemacs-tab-bar                | github    |
| use-package             | bind-key                        | builtin   |
| use-package             | use-package-chords              | builtin   |
| vdm-mode                | flycheck-vdm                    | github    |
| vdm-mode                | vdm-comint                      | github    |
| vdm-mode                | vdm-snippets                    | github    |
| verilog-ext             | verilog-ts-mode                 | github    |
| w3m                     | shimbun                         | github    |
| wgrep                   | wgrep-ack                       | github    |
| wgrep                   | wgrep-ag                        | github    |
| wgrep                   | wgrep-deadgrep                  | github    |
| wgrep                   | wgrep-helm                      | github    |
| wgrep                   | wgrep-pt                        | github    |
| wildcharm-theme         | wildcharm-light-theme           | github    |
| window-jump             | spaces                          | github    |
| window-jump             | splitter                        | github    |
| xwwp                    | xwwp-follow-link-helm           | github    |
| xwwp                    | xwwp-follow-link-ivy            | github    |
| ycm                     | company-ycm                     | github    |
| ycmd                    | company-ycmd                    | github    |
| ycmd                    | flycheck-ycmd                   | github    |
| zetteldesk              | zetteldesk-info                 | github    |
| zetteldesk              | zetteldesk-kb                   | github    |
| zetteldesk              | zetteldesk-ref                  | github    |
| zetteldesk              | zetteldesk-remark               | github    |
| zk                      | zk-desktop                      | github    |
| zk                      | zk-index                        | github    |

** Diverging repositories
:PROPERTIES:
:ID:       493d7e47-cfad-4cbe-b8fb-643a63306fe5
:END:
#+name: melpa-diverging-repositories
#+begin_src emacs-lisp :post addheader('("Package" "Mirror" "" "Melpa" ""),*this*)
  (mapcar (pcase-lambda (`(,name ,type ,url ,fetcher ,murl))
            (list name type (epkg-org-link name) fetcher (melpa-org-link name)))
          (emir-melpa--migrated-packages))
#+end_src
#+results: melpa-diverging-repositories

** Diverging branches
:PROPERTIES:
:ID:       4739083e-ce34-4e33-84e5-f9bfd77b218f
:END:
#+name: melpa-diverging-branches
#+begin_src emacs-lisp :post addheader('("Package" "Used" "Forced" "Melpa" "Class" "Fetcher" "Repo"),*this*)
  (mapcar (pcase-lambda (`(,name . ,rest))
            `(,name ,@rest ,(epkg-org-link name)))
          (emir-melpa--diverging-branches))
#+end_src
#+results: melpa-diverging-branches
| Package (4)       | Used   | Forced | Melpa   | Class  | Fetcher | Repo                                |
|-------------------+--------+--------+---------+--------+---------+-------------------------------------|
| elnode            | master |        | melpa   | github | github  | [[https://github.com/jcaw/elnode][jcaw/elnode]]                         |
| prettier          | master |        | release | github | github  | [[https://github.com/jscheid/prettier.el][jscheid/prettier.el]]                 |
| tree-sitter       | master |        | release | github | github  | [[https://github.com/emacs-tree-sitter/elisp-tree-sitter][emacs-tree-sitter/elisp-tree-sitter]] |
| tree-sitter-langs | master |        | release | github | github  | [[https://github.com/emacs-tree-sitter/tree-sitter-langs][emacs-tree-sitter/tree-sitter-langs]] |

- elnode: https://github.com/jcaw/elnode/issues/1
- prettier: https://github.com/melpa/melpa/pull/6990#issuecomment-651687425
- tree-sitter*: https://github.com/emacs-tree-sitter/elisp-tree-sitter/issues/237

** From Emacsmirror
:PROPERTIES:
:ID:       df84d811-660f-4800-9cad-5e34c7b6ae9b
:END:
#+name: melpa-from-mirror
#+begin_src emacs-lisp :post addheader('("Package" "Url"),*this*)
  (epkg-sql [:select [name url] :from melpa-recipes
             :where (like url '"\"https://github.com/emacsmirror%")
             :order-by [(asc name)]])
#+end_src
#+results: melpa-from-mirror
| Package (12)          | Url                                                  |
|-----------------------+------------------------------------------------------|
| auctex-latexmk        | https://github.com/emacsmirror/auctex-latexmk        |
| clang-format          | https://github.com/emacsmirror/clang-format          |
| darcsum               | https://github.com/emacsmirror/darcsum               |
| dsvn                  | https://github.com/emacsmirror/dsvn                  |
| edit-list             | https://github.com/emacsmirror/edit-list             |
| helm-ls-svn           | https://github.com/emacsmirror/helm-ls-svn           |
| highlight             | https://github.com/emacsmirror/highlight             |
| majapahit-themes      | https://github.com/emacsmirror/majapahit-themes      |
| omtose-phellack-theme | https://github.com/emacsmirror/omtose-phellack-theme |
| po-mode               | https://github.com/emacsmirror/po-mode               |
| quack                 | https://github.com/emacsmirror/quack                 |
| tex-smart-umlauts     | https://github.com/emacsmirror/tex-smart-umlauts     |

** From Emacsattic
:PROPERTIES:
:ID:       0b98c697-7373-40b2-8096-f71c9457cf55
:END:
#+name: melpa-from-attic
#+begin_src emacs-lisp :post addheader('("Package" "Url"),*this*)
  (epkg-sql [:select [name url] :from melpa-recipes
             :where (like url '"\"https://github.com/emacsattic%")])
#+end_src
#+results: melpa-from-attic
| Package (18)        | Url                                               |
|---------------------+---------------------------------------------------|
| angular-mode        | https://github.com/emacsattic/angular-mode        |
| color-theme         | https://github.com/emacsattic/color-theme         |
| company-go          | https://github.com/emacsattic/company-go          |
| company-racer       | https://github.com/emacsattic/company-racer       |
| drawille            | https://github.com/emacsattic/drawille            |
| e2wm-R              | https://github.com/emacsattic/e2wm-R              |
| edit-at-point       | https://github.com/emacsattic/edit-at-point       |
| eno                 | https://github.com/emacsattic/eno                 |
| fold-dwim           | https://github.com/emacsattic/fold-dwim           |
| go-autocomplete     | https://github.com/emacsattic/go-autocomplete     |
| ido-migemo          | https://github.com/emacsattic/ido-migemo          |
| inlineR             | https://github.com/emacsattic/inlineR             |
| mic-paren           | https://github.com/emacsattic/mic-paren           |
| org-doing           | https://github.com/emacsattic/org-doing           |
| org-multiple-keymap | https://github.com/emacsattic/org-multiple-keymap |
| org-wunderlist      | https://github.com/emacsattic/org-wunderlist      |
| quick-preview       | https://github.com/emacsattic/quick-preview       |
| redshank            | https://github.com/emacsattic/redshank            |

* Github                                                           :noexport:
:PROPERTIES:
:ID:       402d9d91-94f5-4412-b57d-1dd0ae9adc55
:END:
** Archived repositories
:PROPERTIES:
:ID:       a621dd5e-a206-4dad-b03f-deb33c0960db
:END:
#+name: github-archived
#+begin_src emacs-lisp :post addheader('("Package" "Repository" "Melpa" "Dependants"),*this*)
  (mapcar (pcase-lambda (`(,name ,downloads))
            (list name (epkg-org-link name) downloads
                  (mapconcat #'car (epkg-reverse-dependencies name) " ")))
          (epkg-sql [:select [name downloads] :from packages
                     :where (= upstream-state 'archived)
                     :order-by [(asc name)]]))
#+end_src
#+results: github-archived

** Removed repositories
:PROPERTIES:
:ID:       c9985064-5573-4119-acd0-5b8bf08902ae
:END:
#+name: github-removed
#+begin_src emacs-lisp :post addheader('("Package" "Repository" "Melpa" "Dependants"),*this*)
  (mapcar (pcase-lambda (`(,name ,downloads))
            (list name (epkg-org-link name) downloads
                  (mapconcat #'car (epkg-reverse-dependencies name) " ")))
          (epkg-sql [:select [name downloads] :from packages
                     :where (= upstream-state 'removed)
                     :order-by [(asc name)]]))
#+end_src
#+results: github-removed
