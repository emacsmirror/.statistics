#+SETUPFILE: .orgconfig
#+NAME: setup
#+BEGIN_SRC emacs-lisp :results silent
  (require 'emir)
#+END_SRC
[[https://emacsmirror.net/stats][up]]
* Add provided features
#+NAME: provided-join
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Feature" "Reason")
    (epkg-sql [:select [name class feature join]
               :from [packages provided]
               :where (and (= name package) (notnull join))
               :order-by [(asc package) (asc feature)]]))
#+END_SRC
#+RESULTS: provided-join
| Package (6) | Class    | Feature        | Reason                                    |
|-------------+----------+----------------+-------------------------------------------|
| edb         | orphaned | edbcore        | generated                                 |
| emacs       | builtin  | cus-load       | generated                                 |
| emacs       | builtin  | leim-list      | generated                                 |
| eshell      | builtin  | esh-groups     | generated                                 |
| finder      | builtin  | finder-inf     | generated                                 |
| realgud     | github   | bashdb         | inside directory containing .nosearch     |
| sly         | github   | sly-buttons    | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |
| sly         | github   | sly-common     | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |
| sly         | github   | sly-completion | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |
| sly         | github   | sly-messages   | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |
| sly         | github   | sly-parse      | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |
| sly         | github   | sly-tests      | inside directory containing .nosearch [[https://github.com/capitaomorte/sly/pull/85][#85]] |

* Drop provided features
#+NAME: provided-drop
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Feature" "Reason")
    (epkg-sql [:select [name class feature drop]
               :from [packages provided]
               :where (and (= name package) (notnull drop))
               :order-by [(asc package) (asc feature)]]))
#+END_SRC
#+RESULTS: provided-drop
| Package (5)     | Class  | Feature    | Reason                 |
|-----------------+--------+------------+------------------------|
| coq             | github | maths-menu | pending [[https://github.com/ProofGeneral/PG/issues/197][#197]]           |
| emacspeak       | github | amixer     | pending [[https://github.com/tvraman/emacspeak/pull/15][#15]]            |
| emacspeak       | github | nm         | pending [[https://github.com/tvraman/emacspeak/pull/15][#15]]            |
| emacspeak       | github | tapestry   | pending [[https://github.com/tvraman/emacspeak/pull/15][#15]]            |
| emacspeak       | github | tetris     | pending [[https://github.com/tvraman/emacspeak/pull/15][#15]]            |
| slime           | github | cl-indent  | pending [[https://github.com/capitaomorte/sly/issues/92][sly#92]]         |
| sly             | github | cl-indent  | pending [[https://github.com/capitaomorte/sly/issues/92][sly#92]]         |
| twittering-mode | github | ssl        | backward compatibility |
| twittering-mode | github | test       | pending [[https://github.com/hayamiz/twittering-mode/pull/129][#129]]           |

* Drop required features
#+NAME: required-drop
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Feature" "Reason")
    (epkg-sql [:select [name class feature drop]
               :from [packages required]
               :where (and (= name package) (notnull drop))
               :order-by [(asc package) (asc feature)]]))
#+END_SRC
#+RESULTS: required-drop
| Package (63)                    | Class       | Feature                | Reason                                              |
|---------------------------------+-------------+------------------------+-----------------------------------------------------|
| ac-octave                       | github      | octave-inf             | backward compatibility                              |
| aozora-view                     | github      | ivs-aj1                | pending [[https://github.com/kawabata/aozora-view/issues/3][#3]]                                          |
| auto-complete                   | github      | semantic-ia            | backward compatibility                              |
| bbdb                            | git         | vm-autoloads           | generated external file                             |
| centered-window-mode            | github      | mac-win                | Mac-port compatibility [[https://github.com/anler/centered-window-mode/issues/28][#28]]                          |
| color-theme-sanityinc-solarized | github      | color-theme            | backward compatibility                              |
| color-theme-sanityinc-tomorrow  | github      | color-theme            | backward compatibility                              |
| color-theme-solarized           | github      | color-theme            | backward compatibility                              |
| company                         | github      | semantic-idle          | backward compatibility                              |
| coq                             | github      | atomic-extents         | XEmacs compatibility                                |
| coq                             | github      | proof-x-symbol         | only for obsolete library                           |
| ddskk                           | github      | balloon-help           | XEmacs compatibility                                |
| ddskk                           | github      | jisx0213               | backward compatibility                              |
| ddskk                           | github      | nicola-ddskk-autoloads | generated internal file                             |
| ddskk                           | github      | skk-autoloads          | generated internal file                             |
| dictionary                      | github      | balloon-help           | XEmacs compatibility                                |
| dired+                          | wiki        | help+20                | backward compatibility                              |
| dired+                          | wiki        | subr-21                | backward compatibility                              |
| doremi-cmd                      | wiki        | color-theme            | backward compatibility                              |
| ecb                             | github      | semantic-analyze       | backward compatibility: [[https://github.com/ecb-home/ecb/issues/24][#24]]                         |
| ecb                             | github      | semantic-ctxt          | backward compatibility: [[https://github.com/ecb-home/ecb/issues/24][#24]]                         |
| ecb                             | github      | thing                  | XEmacs compatibility                                |
| ee                              | git         | bbdb-autoloads         | generated external file                             |
| el-autoyas                      | github      | yasnippet-bundle       | backward compatibility: [[https://github.com/mattfidler/el-autoyas.el/issues/4][#4]]                          |
| emacspeak                       | github      | org-exp                | required by obsolete library                        |
| erlang                          | github      | tags                   | backward compatibility                              |
| es-lib                          | github      | ack-and-a-half         | removed due to license violations: [[https://github.com/sabof/es-lib/issues/3][#3]]               |
| extend-dnd                      | github      | yasnippet-bundle       | backward compatibility: [[https://github.com/mattfidler/el-autoyas.el/issues/4][#4]]                          |
| folding                         | github      | mode-motion            | XEmacs compatibility                                |
| fstar-mode                      | github      | replace                | replace.el doesn't provide feature in Emacs < 26    |
| gnuplot                         | github      | toolbar                | XEmacs compatibility                                |
| gnus                            | builtin     | un-define              | XEmacs compatibility                                |
| guix                            | github      | guix-emacs             | distributed with GuixSD itself                      |
| help+                           | wiki        | info+20                | backward compatibility                              |
| hyperbole                       | git         | efs                    | XEmacs compatibility                                |
| hyperbole                       | git         | id-menubars            | unreleased, author says will be released eventually |
| hyperbole                       | git         | x-mouse                | unreleased, author says will be released eventually |
| icicles                         | wiki        | color-theme            | backward compatibility                              |
| jabber                          | git         | un-define              | XEmacs compatibility                                |
| jdee                            | github      | working                | stand-alone cedet compatibility                     |
| lacarte                         | wiki        | subr-21                | backward compatibility                              |
| lilypond                        | git         | ilisp                  | only required by a single undocumented command      |
| lispxmp                         | wiki        | newxmp                 | pending: newxmp has not been released yet (email)   |
| load-theme-buffer-local         | github      | color-theme            | backward compatibility                              |
| matlab-mode                     | git         | semantic-dep           | backward compatibility                              |
| matlab-mode                     | git         | semantic-format        | backward compatibility                              |
| matlab-mode                     | git         | semanticdb             | backward compatibility                              |
| matlab-mode                     | git         | srecode-map            | backward compatibility                              |
| menu-bar+                       | wiki        | help+20                | backward compatibility                              |
| menu-bar+                       | wiki        | info+20                | backward compatibility                              |
| mew                             | github      | mw32script             | Meadow Emacs compatibility                          |
| mew                             | github      | un-define              | XEmacs compatibility                                |
| mh-e                            | builtin     | toolbar                | XEmacs compatibility                                |
| mhc                             | github      | bitmap                 | XEmacs compatibility                                |
| mhc                             | github      | mhc-bm                 | Mule compatibility                                  |
| mhc                             | github      | mhc-xmas               | XEmacs compatibility                                |
| mhc                             | github      | pcustom                | Mule compatibility                                  |
| mhc                             | github      | poe                    | Mule compatibility                                  |
| molokai-theme                   | github      | color-theme            | backward compatibility                              |
| navi2ch                         | github      | bitmap                 | XEmacs compatibility                                |
| notes-mode                      | elpa        | npgp                   | backward compatibility                              |
| notes-mode                      | elpa        | pam                    | backward compatibility                              |
| nxhtml                          | orphaned    | emacsw32               | examples only                                       |
| nxhtml                          | orphaned    | flymake-js             | not a proper package [[https://github.com/Anks/elisp/blob/master/flymake-js.el][source]]                         |
| nxhtml                          | orphaned    | typesetter             | not touched in ten years                            |
| nxhtml                          | orphaned    | w32-regdat             | Windows compatibility                               |
| nxhtml                          | orphaned    | w32shell               | Windows compatibility                               |
| org                             | git         | org-remember           | backward compatibility                              |
| org-caldav                      | github      | org-icalendar          | backward compatibility                              |
| org-readme                      | github      | org-html               | backward compatibility: [[https://github.com/mattfidler/org-readme/issues/19][#19]]                         |
| org-toodledo                    | github      | org-toodledo-test      | fixme [[https://github.com/myuhe/org-toodledo/pull/6][#6]]                                            |
| po-mode                         | minority    | po-compat              | backward compatibility                              |
| project-explorer                | github      | ack-and-a-half         | removed due to license violations: [[https://github.com/sabof/project-explorer/issues/47][#47]]              |
| python-mode                     | gitlab      | pymacs                 | it's complicated (email)                            |
| r-autoyas                       | github      | yasnippet-bundle       | backward compatibility: [[https://github.com/mattfidler/el-autoyas.el/issues/4][#4]]                          |
| rpm-spec-mode                   | github      | shindent               | pending [[https://github.com/stigbjorlykke/rpm-spec-mode/pull/11][#11]]                                         |
| tangotango-theme                | github      | color-theme            | backward compatibility                              |
| tc                              | github      | bitmap                 | pending [[https://github.com/kozo2/tc/issues/5][#5]]                                          |
| twittering-mode                 | github      | alpaca                 | only required if epa isn't available                |
| twittering-mode                 | github      | revive                 | false-positive                                      |
| twittering-mode                 | github      | un-define              | XEmacs compatibility                                |
| twittering-mode                 | github      | unicode                | backward compatibility                              |
| ucs-utils                       | github      | ucs-utils-6.0-delta    | backward compatibility                              |
| vcl-mode                        | github      | generic-mode           | XEmacs compatibility                                |
| vm                              | orphaned    | atomic-extents         | XEmacs compatibility                                |
| vm                              | orphaned    | highlight-headers      | XEmacs compatibility                                |
| vm                              | orphaned    | timer-funcs            | XEmacs compatibility                                |
| vm                              | orphaned    | vm-autoloads           | generated internal file                             |
| w3                              | elpa-branch | dtk-voices             | used to be part of emacspeak, not needed            |
| w3                              | elpa-branch | w3-site-init           | leftover noise                                      |
| w3                              | elpa-branch | x-font-menu            | XEmacs compatibility                                |
| w3                              | elpa-branch | xbm-button             | XEmacs compatibility                                |
| w3                              | elpa-branch | xpm-button             | XEmacs compatibility                                |
| w3m                             | orphaned    | un-define              | XEmacs compatibility                                |
| wisi                            | elpa        | wisi-compat-24.2       | backward compatibility                              |
| yatex                           | hg          | hilit19                | backward compatibility                              |

* Patched packages
#+NAME: patched
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class")
    (epkg-sql [:select [name class]
               :from packages
               :where (= patched 't)
               :order-by [(asc name)]]))
#+END_SRC
#+RESULTS: patched
| Package (13)     | Class  |
|------------------+--------|
| anything-project | github |
| apel             | github |
| elixir-mode      | github |
| flim             | github |
| go               | github |
| karma            | github |
| lookup           | github |
| nav              | github |
| oauth            | github |
| overseer         | github |
| projmake-mode    | github |
| semi             | github |
| wanderlust       | github |

* Set main library
#+NAME: no-mainlib
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Library" "Reason")
    (mapcar (-lambda ((name type library))
              (list name type library
                    (cadr (assoc name emir--library-reason))))
            (epkg-sql [:select [name class library] :from packages
                       :where (notnull library)
                       :and class :in $v1
                       :order-by [(asc name)]]
                      (closql-where-class-in
                       'epkg-mirrored-package--eieio-childp))))
#+END_SRC
#+RESULTS: no-mainlib
| Package (21)         | Class       | Library                 | Reason                     |
|----------------------+-------------+-------------------------+----------------------------|
| ada-ref-man          | elpa        | ada-ref-man.el          | no feature [[http://debbugs.gnu.org/cgi/bugreport.cgi?bug=24517][debbugs#24517]]   |
| auctex               | elpa-branch | tex.el                  | pkg/lib name mismatch      |
| chumpy-windows       | github      | window-jump.el          | no primary entry point     |
| ddskk                | github      | skk.el                  | pkg/lib name mismatch      |
| dired-hacks          | github      | dired-hacks-utils.el    | no primary entry point     |
| edb                  | orphaned    | lisp/database.el        |                            |
| emacs-speaks-nonmem  | github      | esn-start.el            | no/mismatched main library |
| emux                 | github      | emux-base.el            | no/mismatched main library |
| ert-runner           | github      | ert-runner.el           | not a library [[https://github.com/rejeep/ert-runner.el/pull/16][#16]]          |
| eziam-theme          | github      | eziam-dark-theme.el     | two-variant theme          |
| farmhouse-theme      | github      | farmhouse-dark-theme.el | two-variant theme [[https://github.com/mattly/emacs-farmhouse-theme/pull/3][#3]]       |
| html5                | github      | html5-ncr.el            | no/mismatched main library |
| literate-starter-kit | github      | init.el                 | not a package              |
| majapahit-theme      | gitlab      | majapahit-dark-theme.el | two-variant theme [[https://gitlab.com/franksn/majapahit-theme/merge_requests/1][#1]]       |
| ne2wm                | github      | ne2wm-setup.el          | no/mismatched main library |
| profile-dotemacs     | file        | profile-dotemacs.el     |                            |
| punpun-theme         | github      | punpun-dark-theme.el    | two-variant theme [[https://github.com/wasamasa/punpun-theme/pull/7][#7]]       |
| spacemacs-theme      | github      | spacemacs-common.el     | two-variant theme [[https://github.com/nashamri/spacemacs-theme/pull/63][#63]]      |
| tao-theme            | github      | tao-yang-theme.el       | two-variant theme [[https://github.com/11111000000/tao-theme-emacs/pull/17][#17]]      |
| ultratex             | github      | lisp/ultex.el           | no/mismatched main library |
| uni-confusables      | elpa        | uni-confusables.el      | no feature [[http://debbugs.gnu.org/cgi/bugreport.cgi?bug=24517][debbugs#24517]]   |

* Set libraries
#+NAME: slot--libraries
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Library")
    (epkg-sql [:select [name class libraries:library]
               :from [packages libraries]
               :where (= name package)
               :and class :in $v1
               :order-by [(asc package)
                          (asc libraries:library)]]
              (closql-where-class-in
               'epkg-mirrored-package--eieio-childp)))
#+END_SRC
#+RESULTS: slot--libraries
| Package (6)        | Class | Library                      |
|--------------------+-------+------------------------------|
| bookmark+          | wiki  | bookmark+-1.el               |
| bookmark+          | wiki  | bookmark+-bmu.el             |
| bookmark+          | wiki  | bookmark+-chg.el             |
| bookmark+          | wiki  | bookmark+-doc.el             |
| bookmark+          | wiki  | bookmark+-key.el             |
| bookmark+          | wiki  | bookmark+-lit.el             |
| bookmark+          | wiki  | bookmark+-mac.el             |
| bookmark+          | wiki  | bookmark+.el                 |
| d-insert-import    | wiki  | d-insert-import-data.el      |
| d-insert-import    | wiki  | d-insert-import.el           |
| icicles            | wiki  | icicles-chg.el               |
| icicles            | wiki  | icicles-cmd1.el              |
| icicles            | wiki  | icicles-cmd2.el              |
| icicles            | wiki  | icicles-doc1.el              |
| icicles            | wiki  | icicles-doc2.el              |
| icicles            | wiki  | icicles-face.el              |
| icicles            | wiki  | icicles-fn.el                |
| icicles            | wiki  | icicles-mac.el               |
| icicles            | wiki  | icicles-mcmd.el              |
| icicles            | wiki  | icicles-mode.el              |
| icicles            | wiki  | icicles-opt.el               |
| icicles            | wiki  | icicles-var.el               |
| icicles            | wiki  | icicles.el                   |
| sequential-command | wiki  | sequential-command-config.el |
| sequential-command | wiki  | sequential-command.el        |
| thing-edit         | wiki  | thing-edit-extension.el      |
| thing-edit         | wiki  | thing-edit.el                |
| yaoddmuse          | wiki  | yaoddmuse-extension.el       |
| yaoddmuse          | wiki  | yaoddmuse.el                 |

* Set branch
#+NAME: slot--upstream-branch
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Branch")
    (epkg-sql [:select [name class upstream-branch] :from packages
               :where (notnull upstream-branch)
               :and class :in $v1
               :order-by [(asc name)]]
              (closql-where-class-in
               'epkg-mirrored-package--eieio-childp)))
#+END_SRC
#+RESULTS: slot--upstream-branch
| Package (7)         | Class  | Branch       |
|---------------------+--------+--------------|
| apel                | github | apel-wl      |
| distinguished-theme | github | develop      |
| ebuild-mode         | git    | ebuild-mode  |
| flim                | github | flim-1_14-wl |
| neato-graph-bar     | gitlab | release      |
| propfont-mixed      | github | github       |
| semi                | github | semi-1_14-wl |

