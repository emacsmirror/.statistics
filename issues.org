:PREAMBLE:
#+TITLE: Epkgs: Issues
#+SETUPFILE: .orgconfig
#+NAME: setup
#+BEGIN_SRC emacs-lisp :results silent
  (require 'emir)
#+END_SRC
[[https://emacsmirror.net/stats][up]]
:END:
* Minority packages
#+NAME: minority
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Library")
    (epkgs [name url] 'epkg-minority-package-p)))
#+END_SRC
#+RESULTS: minority
| Package (25)        | Library                                      |
|---------------------+----------------------------------------------|
| autotest            | git@github.com:zenspider/elisp.git           |
| bibliothek          | git@github.com:cadadr/elisp.git              |
| cfengine-code-style | git@github.com:cfengine/core.git             |
| clang-format        | git@github.com:llvm/llvm-project.git         |
| cmake-mode          | https://gitlab.kitware.com/cmake/cmake.git   |
| cython-mode         | git@github.com:cython/cython.git             |
| diffscuss-mode      | git@github.com:tomheon/diffscuss.git         |
| forecast            | git@github.com:cadadr/elisp.git              |
| google-c-style      | git@github.com:google/styleguide.git         |
| nemerle             | git@github.com:rsdn/nemerle.git              |
| ninja-mode          | git@github.com:ninja-build/ninja.git         |
| org-pua             | git@github.com:Henry/dot-emacs.git           |
| org-variable-pitch  | git@github.com:cadadr/elisp.git              |
| paper-theme         | git@github.com:cadadr/elisp.git              |
| po-mode             | https://git.savannah.gnu.org/git/gettext.git |
| pylint              | git@github.com:PyCQA/pylint.git              |
| rfringe             | git@github.com:DinoChiesa/dpchiesa-elisp.git |
| smart-compile       | git@github.com:zenitani/elisp.git            |
| tenv                | git@github.com:aki2o/elisp-test.git          |
| tfs                 | git@github.com:DinoChiesa/dpchiesa-elisp.git |
| thesaurus           | git@github.com:DinoChiesa/dpchiesa-elisp.git |
| thingatpt-ext       | git@github.com:Henry/dot-emacs.git           |
| thrift              | git@github.com:apache/thrift.git             |
| toggle              | git@github.com:zenspider/elisp.git           |
| wn-org              | git@github.com:Henry/dot-emacs.git           |

* Subtree packages
#+NAME: subtree
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Library")
    (epkgs [name url] 'epkg-subtree-package-p)))
#+END_SRC
#+RESULTS: subtree
| Package (25)    | Library                                                             |
|-----------------+---------------------------------------------------------------------|
| agda2-mode      | git@github.com:agda/agda.git                                        |
| company-go      | git@github.com:nsf/gocode.git                                       |
| cubicle-mode    | git@github.com:cubicle-model-checker/cubicle.git                    |
| dune            | git@github.com:ocaml/dune.git                                       |
| egison-mode     | git@github.com:egison/egison.git                                    |
| fuel            | git@github.com:factor/factor.git                                    |
| go-autocomplete | git@github.com:nsf/gocode.git                                       |
| golint          | git@github.com:golang/lint.git                                      |
| govc            | git@github.com:vmware/govmomi.git                                   |
| gvpr-mode       | git@github.com:rodw/gvpr-lib.git                                    |
| kivy-mode       | git@github.com:kivy/kivy.git                                        |
| lambdapi-mode   | git@github.com:Deducteam/lambdapi.git                               |
| lfe-mode        | git@github.com:rvirding/lfe.git                                     |
| mandoku         | git@github.com:mandoku/mandoku.git                                  |
| merlin          | git@github.com:the-lambda-church/merlin.git                         |
| mozart          | git@github.com:mozart/mozart2.git                                   |
| mozc            | git@github.com:google/mozc.git                                      |
| password-store  | https://git.zx2c4.com/password-store                                |
| protobuf-mode   | git@github.com:google/protobuf.git                                  |
| rcodetools      | git@github.com:rcodetools/rcodetools.git                            |
| scad-mode       | git@github.com:openscad/openscad.git                                |
| stumpwm-mode    | git@github.com:stumpwm/stumpwm-contrib.git                          |
| utop            | git@github.com:diml/utop.git                                        |
| widgetjs        | git@github.com:foretagsplatsen/emacs-js.git                         |
| zeitgeist       | https://anongit.freedesktop.org/git/zeitgeist/zeitgeist-datasources |

* Features provided by multiple packages
#+NAME: conflict
#+BEGIN_SRC emacs-lisp
  (let (alist)
    (dolist (name (epkgs 'name))
      (dolist (feature (epkg-sql [:select feature :from provided
                                  :where (and (= package $s1)
                                              (isnull drop))]
                                 name))
        (setq feature (car feature))
        (-if-let (elt (assq feature alist))
            (push name (cdr elt))
          (cl-pushnew (list feature name) alist))))
    (epkg-with-org-header ("Feature" "Package" "Shelved")
      (mapcar (-lambda ((feature package))
                (list feature package
                      (epkg-shelved-package-p (epkg package))))
              (-mapcat (-lambda ((feature . providers))
                         (and (> (length providers) 1)
                              (list (list feature providers))
                              (--map (list feature it)
                                     (sort providers #'string<))))
                       (cl-sort alist #'string< :key #'car)))))
#+END_SRC
#+RESULTS: conflict
| Feature (2)       | Package          | Shelved |
|-------------------+------------------+---------|
| mimetypes         | axe              |         |
| mimetypes         | mimetypes        |         |
| org-insert-dblock | orgtbl-aggregate |         |
| org-insert-dblock | orgtbl-join      |         |

- mimetypes: https://github.com/melpa/melpa/pull/7208
- org-insert-dblock: https://github.com/tbanel/orgtbljoin/issues/1
Reoccuring issues:
- test-helper (see [[https://github.com/rejeep/ert-runner.el/issues/38][ert-runner#38]])

* Packages with unsatisfied dependencies
#+NAME: unsatisfied
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Class" "Feature" "Provider")
    (-mapcat
     (-lambda ((name class))
       (let (alist)
	 (-each (epkg-sql [:select feature :from required
                           :where (and (= package $s1)
                                       (isnull drop))]
                          name)
           (-lambda ((feature))
             (-if-let (provider (epkg-provided-by feature))
		 (when (epkg-sql [:select class :from packages
                                  :where (and (= name $s1)
                                              (= class 'shelved))]
				 provider)
                   (push (list feature provider) alist))
               (push (list feature nil) alist))))
	 (mapcar (-lambda ((feature provider))
                   (list name class feature provider))
		 (cl-sort alist #'string< :key #'car))))
     (epkgs [name class] 'epkg-mirrored-package--eieio-childp)))
#+END_SRC
#+RESULTS: unsatisfied
| Package (4) | Class  | Feature                  | Provider |
|-------------+--------+--------------------------+----------|
| bts         | github | pophint-config           |          |
| cpio-mode   | github | cpio-entry-contents-mode |          |
| emir        | github | llama                    |          |
| ess         | github | ess-stata-mode           |          |

- bts: https://github.com/aki2o/emacs-bts/pull/17
- cpio-mode: https://github.com/dlewan/cpio-mode/issues/2
- emir: I haven't released llama yet.
- ess: https://github.com/emacs-ess/ESS/issues/1033

* Packages whose repositories have been archived
Don't forget to update ~emir--archived-packages~ occasionally.
#+NAME: archived
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Repository" "Melpa" "Reverse Dependencies")
    (cl-sort
     (-keep (lambda (name)
              (and (member name emir--archived-packages)
                   (list name
                         (epkg-org-link name)
                         (and (melpa-get name)
                              ;; (oref (epkg name) downloads)
                              "✓"
                              )
                         (mapconcat (pcase-lambda (`(,name . ,_features)) name)
                                    (epkg-reverse-dependencies name) " "))))
            (epkgs 'name 'epkg-mirrored-package--eieio-childp))
     #'string< :key #'car))
#+END_SRC
#+RESULTS: archived
| Package (12)     | Repository                  | Melpa | Reverse Dependencies    |
|------------------+-----------------------------+-------+-------------------------|
| flymake-phpcs    | [[https://github.com/senda-akiha/flymake-phpcs][senda-akiha/flymake-phpcs]]   | ✓     | drupal-mode             |
| github-issues    | [[https://github.com/inkel/github-issues.el][inkel/github-issues.el]]      | ✓     | git-commit-insert-issue |
| helm-addressbook | [[https://github.com/emacs-helm/helm-addressbook][emacs-helm/helm-addressbook]] | ✓     |                         |
| helm-apt         | [[https://github.com/emacs-helm/helm-apt][emacs-helm/helm-apt]]         | ✓     |                         |
| helm-elscreen    | [[https://github.com/emacs-helm/helm-elscreen][emacs-helm/helm-elscreen]]    | ✓     |                         |
| helm-emms        | [[https://github.com/emacs-helm/helm-emms][emacs-helm/helm-emms]]        | ✓     |                         |
| helm-firefox     | [[https://github.com/emacs-helm/helm-firefox][emacs-helm/helm-firefox]]     | ✓     | org-linkany             |
| helm-ls-git      | [[https://github.com/emacs-helm/helm-ls-git][emacs-helm/helm-ls-git]]      | ✓     | helm                    |
| helm-ls-hg       | [[https://github.com/emacs-helm/helm-ls-hg][emacs-helm/helm-ls-hg]]       | ✓     | helm                    |
| helm-w3m         | [[https://github.com/emacs-helm/helm-w3m][emacs-helm/helm-w3m]]         | ✓     | org-linkany             |
| image+           | [[https://github.com/mhayashi1120/Emacs-imagex][mhayashi1120/Emacs-imagex]]   | ✓     | evil-collection         |
| intero           | [[https://github.com/commercialhaskell/intero][chrisdone/intero]]            | ✓     |                         |

* Github repositories that were moved or removed
Don't forget to update ~emir--moved-packages~ occasionally.
#+NAME: github-moved
#+BEGIN_SRC emacs-lisp
  (epkg-with-org-header ("Package" "Old" "New")
    (cl-sort (copy-sequence emir--moved-packages) #'string< :key #'cadr))
#+END_SRC
#+RESULTS: github-moved

